title: 大浏览量系统的解决思路
tags:
  - 案例
categories:
  - 案例
date: 2016-03-02 23:07:00
---
随着网站的发展壮大，系统也面临越来越多的挑战，有些是业务发展带来的挑战，例如大型促销活动，秒杀活动等突发流量冲击；还有一些是非正常的访问请求，例如网站经常受到攻击和恶意请求。像这种流量突然暴增的情况对系统的冲击很大，有时候流量突然暴增的情况对系统的冲击很大，有时候流量瞬间可达到20w/s的QPS,所以如何让系统有更好的性能和稳定性是我们面临的一大挑战。

在介绍前台系统的静态化改造之前，先说说可以做哪些优化工作。介绍下淘宝前台系统的优化历程。

2009年，系统拆分，静态文件合并，前端页面异步化和JSON化。
2010年，去DB依赖，引入缓存，提升单机QPS，关注用户体验。
2011年，优化进入深水区Velocity，BigPipe。
2012年，静态化改造。
2013年，统一Cache，CDN化，网络协议。


<b>静态改造</b>

1.什么是静态化系统

在要改造成静态化系统之前首先要搞明白什么是静态化系统？

几个特征：

	1.一个页面对应URL通常固定。
	2.在页面中不能包含与浏览者相关的因素，这里所说的“不能包含”不包括JS动态生成的部分，也就是在页面中HTML代码不能明显地含有与浏览器相关的DOM。
    3.在页面中不包含时间因素。页面同样不能含有与时间（而是服务端输出的时间）相关的因素，页面中的DOM不随时间变化而变化。
    4.页面中不包含地域信息。
    5.不能包含Cookie等私有数据。

为什么要进行静态化架构设计

系统经过多次优化升级，包括系统架构的升级，系统本身的模块优化，代码优化和增加各种缓存等这些优化，我们的优化层次都是在java系统中做改进的。在这种情况下压测我们的java系统，性能依旧不能满足我们的期望，我们的目标是再上一个数量级。

如何改造动态系统

    URL唯一化
    分离与浏览者相关的因素。
    分离时间因素。
    异地化地域因素。
    去掉Cookie。
   	动态内容结构化。（ESI和CSI）
    
  
    
   




